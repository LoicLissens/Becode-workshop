{"ast":null,"code":"import _slicedToArray from\"/Users/loiclissens/Desktop/workshop-electron-init/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import useInterval from\"./useInterval\";import soundFile1 from\"./assets/click1.wav\";import soundFile2 from\"./assets/click2.wav\";import play from\"./assets/play.png\";import pause from\"./assets/pause.png\";var Metronome=function Metronome(){var _useState=useState(100),_useState2=_slicedToArray(_useState,2),beat=_useState2[0],setBeat=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),playing=_useState4[0],setPlaying=_useState4[1];var _useState5=useState({count:0,pulse:4}),_useState6=_slicedToArray(_useState5,2),measure=_useState6[0],setMeasure=_useState6[1];var click1=new Audio(soundFile1);var click2=new Audio(soundFile2);var handleSlider=function handleSlider(e){setMeasure({count:0,pulse:measure.pulse});setBeat(+e.target.value);};var startStop=function startStop(){if(!playing){setMeasure({count:0,pulse:measure.pulse});setPlaying(true);}else{setPlaying(false);}};var playClick=function playClick(){if(measure.count%measure.pulse===0){click1.currentTime=0;click1.play();}else{click2.currentTime=0;click2.play();}setMeasure({count:(measure.count+1)%measure.pulse,pulse:measure.pulse});};useInterval(function(){if(playing){playClick();}},60000/beat);var handleMinus=function handleMinus(){setMeasure({count:0,pulse:measure.pulse});setBeat(beat-1);};var handlePlus=function handlePlus(){setMeasure({count:0,pulse:measure.pulse});setBeat(beat+1);};var handlePulse=function handlePulse(e){document.querySelectorAll(\"button.active\").forEach(function(button){button.classList.remove(\"active\");});e.target.classList.add(\"active\");setMeasure({count:0,pulse:+e.target.value});};return React.createElement(\"div\",{className:\"metronome\"},React.createElement(\"h3\",null,beat,\" BPM\"),React.createElement(\"div\",{className:\"bpm-slider\"},React.createElement(\"button\",{onClick:handleMinus},\"-\"),React.createElement(\"input\",{type:\"range\",min:\"60\",max:\"240\",value:beat,onChange:handleSlider}),React.createElement(\"button\",{onClick:handlePlus},\"+\")),React.createElement(\"button\",{className:\"startStop\",onClick:startStop},React.createElement(\"img\",{src:playing?pause:play,alt:\"play/pause\"})),React.createElement(\"div\",{className:\"bpm-measure\"},React.createElement(\"h4\",null,\"Mesure : \"),React.createElement(\"button\",{value:\"2\",onClick:handlePulse},\"2\"),React.createElement(\"button\",{value:\"3\",onClick:handlePulse},\"3\"),React.createElement(\"button\",{value:\"4\",onClick:handlePulse,className:\"active\"},\"4\")));};export default Metronome;","map":{"version":3,"sources":["/Users/loiclissens/Desktop/workshop-electron-init/src/metronome.js"],"names":["React","useState","useInterval","soundFile1","soundFile2","play","pause","Metronome","beat","setBeat","playing","setPlaying","count","pulse","measure","setMeasure","click1","Audio","click2","handleSlider","e","target","value","startStop","playClick","currentTime","handleMinus","handlePlus","handlePulse","document","querySelectorAll","forEach","button","classList","remove","add"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport useInterval from \"./useInterval\";\n\nimport soundFile1 from \"./assets/click1.wav\";\nimport soundFile2 from \"./assets/click2.wav\";\nimport play from \"./assets/play.png\";\nimport pause from \"./assets/pause.png\";\n\nconst Metronome = () => {\n  const [beat, setBeat] = useState(100);\n  const [playing, setPlaying] = useState(false);\n  const [measure, setMeasure] = useState({\n    count: 0,\n    pulse: 4\n  });\n\n  const click1 = new Audio(soundFile1);\n  const click2 = new Audio(soundFile2);\n\n  const handleSlider = (e) => {\n    setMeasure({ count: 0, pulse: measure.pulse });\n    setBeat(+e.target.value);\n  };\n\n  const startStop = () => {\n    if (!playing) {\n      setMeasure({ count: 0, pulse: measure.pulse });\n      setPlaying(true);\n    } else {\n      setPlaying(false);\n    }\n  };\n\n  const playClick = () => {\n    if (measure.count % measure.pulse === 0) {\n      click1.currentTime = 0;\n      click1.play();\n    } else {\n      click2.currentTime = 0;\n      click2.play();\n    }\n    setMeasure({\n      count: (measure.count + 1) % measure.pulse,\n      pulse: measure.pulse\n    });\n  };\n\n  useInterval(() => {\n    if (playing) {\n      playClick();\n    }\n  }, 60000 / beat);\n  const handleMinus = () => {\n    setMeasure({ count: 0, pulse: measure.pulse });\n    setBeat(beat - 1);\n  };\n\n  const handlePlus = () => {\n    setMeasure({ count: 0, pulse: measure.pulse });\n    setBeat(beat + 1);\n  };\n\n  const handlePulse = (e) => {\n    document.querySelectorAll(\"button.active\").forEach((button) => {\n      button.classList.remove(\"active\");\n    });\n    e.target.classList.add(\"active\");\n    setMeasure({ count: 0, pulse: +e.target.value });\n  };\n\n  return (\n    <div className=\"metronome\">\n      <h3>{beat} BPM</h3>\n      <div className=\"bpm-slider\">\n        <button onClick={handleMinus}>-</button>\n        <input type=\"range\" min=\"60\" max=\"240\" value={beat} onChange={handleSlider} />\n        <button onClick={handlePlus}>+</button>\n      </div>\n\n      <button className=\"startStop\" onClick={startStop}>\n        <img src={playing ? pause : play} alt=\"play/pause\"></img>\n      </button>\n\n      <div className=\"bpm-measure\">\n        <h4>Mesure : </h4>\n        <button value=\"2\" onClick={handlePulse}>\n          2\n        </button>\n        <button value=\"3\" onClick={handlePulse}>\n          3\n        </button>\n        <button value=\"4\" onClick={handlePulse} className=\"active\">\n          4\n        </button>\n      </div>\n    </div>\n  );\n};\nexport default Metronome;\n"]},"metadata":{},"sourceType":"module"}